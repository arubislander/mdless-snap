name: mdless
base: core18 
version: '1.0.10+snap6'
summary: View Markdown comfortably in the terminal
description: |
  mdless is a utility that provides a formatted and highlighted view 
  of Markdown files in the terminal.

grade: stable
confinement: strict 

parts:
  mdless:
    # See 'snapcraft plugins'
    plugin: nil
    source: https://github.com/ttscoff/mdless.git
    source-type: git
    override-build: |
      gem build mdless.gemspec
      gem install mdless-*.gem -i $SNAPCRAFT_PART_INSTALL
    build-packages: [gcc, libc6-dev, make, ruby-dev]
    stage-packages: [ruby, git]

apps:
  mdless:
    plugs:
      - home
      - removable-media
    environment:
      RUBYLIB: $SNAP/usr/lib/ruby/2.5.0:$SNAP/usr/lib/x86_64-linux-gnu/ruby/2.5.0
      GEM_HOME: $SNAP/gems
      GEM_PATH: $SNAP
    command: ruby $SNAP/bin/mdless
